var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX="jscomp_symbol_";
$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.symbolCounter_=0;$jscomp.Symbol=function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+$jscomp.symbolCounter_++};
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};$jscomp.arrayIterator=function(a){var b=0;return $jscomp.iteratorPrototype(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.makeIterator=function(a){$jscomp.initSymbolIterator();var b=a[Symbol.iterator];return b?b.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var b,c=[];!(b=a.next()).done;)c.push(b.value);return c};$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};
$jscomp.polyfill=function(a,b,c,d){if(b){c=$jscomp.global;a=a.split(".");for(d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&$jscomp.defineProperty(c,a,{configurable:!0,writable:!0,value:b})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function b(){this.batch_=null}function c(a){return a instanceof e?a:new e(function(b,c){b(a)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;b.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};b.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var d=$jscomp.global.setTimeout;b.prototype.asyncExecuteFunction=function(a){d(a,
0)};b.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var b=0;b<a.length;++b){var c=a[b];delete a[b];try{c()}catch(l){this.asyncThrow_(l)}}}this.batch_=null};b.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var e=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var b=this.createResolveAndReject_();try{a(b.resolve,b.reject)}catch(m){b.reject(m)}};e.prototype.createResolveAndReject_=
function(){function a(a){return function(d){c||(c=!0,a.call(b,d))}}var b=this,c=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};e.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof e)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var b=null!=a;break a;case "function":b=!0;break a;default:b=!1}b?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};e.prototype.resolveToNonPromiseObj_=function(a){var b=
void 0;try{b=a.then}catch(m){this.reject_(m);return}"function"==typeof b?this.settleSameAsThenable_(b,a):this.fulfill_(a)};e.prototype.reject_=function(a){this.settle_(2,a)};e.prototype.fulfill_=function(a){this.settle_(1,a)};e.prototype.settle_=function(a,b){if(0!=this.state_)throw Error("Cannot settle("+a+", "+b|"): Promise already settled in state"+this.state_);this.state_=a;this.result_=b;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
this.onSettledCallbacks_,b=0;b<a.length;++b)a[b].call(),a[b]=null;this.onSettledCallbacks_=null}};var f=new b;e.prototype.settleSameAsPromise_=function(a){var b=this.createResolveAndReject_();a.callWhenSettled_(b.resolve,b.reject)};e.prototype.settleSameAsThenable_=function(a,b){var c=this.createResolveAndReject_();try{a.call(b,c.resolve,c.reject)}catch(l){c.reject(l)}};e.prototype.then=function(a,b){function c(a,b){return"function"==typeof a?function(b){try{d(a(b))}catch(n){f(n)}}:b}var d,f,g=new e(function(a,
b){d=a;f=b});this.callWhenSettled_(c(a,d),c(b,f));return g};e.prototype.catch=function(a){return this.then(void 0,a)};e.prototype.callWhenSettled_=function(a,b){function c(){switch(d.state_){case 1:a(d.result_);break;case 2:b(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?f.asyncExecute(c):this.onSettledCallbacks_.push(function(){f.asyncExecute(c)})};e.resolve=c;e.reject=function(a){return new e(function(b,c){c(a)})};e.race=function(a){return new e(function(b,
d){for(var e=$jscomp.makeIterator(a),f=e.next();!f.done;f=e.next())c(f.value).callWhenSettled_(b,d)})};e.all=function(a){var b=$jscomp.makeIterator(a),d=b.next();return d.done?c([]):new e(function(a,e){function f(b){return function(c){g[b]=c;k--;0==k&&a(g)}}var g=[],k=0;do g.push(void 0),k++,c(d.value).callWhenSettled_(f(g.length-1),e),d=b.next();while(!d.done)})};return e},"es6-impl","es3");
$jscomp.findInternal=function(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,v:f}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6-impl","es3");$jscomp.polyfill("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6-impl","es3");
$jscomp.polyfill("Array.prototype.includes",function(a){return a?a:function(a,c){var b=this;b instanceof String&&(b=String(b));var e=b.length;for(c=c||0;c<e;c++)if(b[c]==a||Object.is(b[c],a))return!0;return!1}},"es7","es3");
$jscomp.checkStringArgs=function(a,b,c){if(null==a)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(b instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return a+""};$jscomp.polyfill("String.prototype.includes",function(a){return a?a:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6-impl","es3");var ql={};
function status(a){return 200<=a.status&&300>a.status?Promise.resolve(a):Promise.reject(a)}function json(a){return a.json()}function text(a){return a.text()}ql.getJson=function(a){return fetch(a,{credentials:"include"}).then(status).then(json)};ql.getHtml=function(a){return fetch(a,{credentials:"include"}).then(status).then(text)};
ql.Poller=function(a,b,c,d){this.continuePolling=!0;this.path=a;this.timeout=b;this.success=c;this.failure=d||this.defaultFailure;this.start=function f(){var a=this;this.continuePolling&&ql.getJson(this.path).then(this.success).then(function(){return setTimeout(f.bind(a),a.timeout)}).catch(function(b){a.stop();a.failure(b)})};this.once=function(){ql.getJson(this.path).then(this.success).catch(this.failure)};this.stop=function(){this.continuePolling=!1};this.defaultFailure=function(a){console.log("Request failed",
a)}};ql.events={};ql.subscribe=function(a,b){ql.events[a]=ql.events[a]||[];ql.events[a].push(b);return{unsubscibe:function(){var c=ql.events[a].indexOf(b);ql.events[a].splice(c,1)}}};ql.publish=function(a,b){ql.events[a]&&ql.events[a].forEach(function(a){a.call(this,b)})};ql.debounce=function(a,b,c){b=void 0===b?20:b;c=void 0===c?!0:c;var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b);g&&a.apply(e,f)}};
ql.showFlash=function(a,b){var c=$("#flash-sibling-before"),d=$('<div class="alert"></div>');"notice"==a?d.addClass("alert-success"):d.addClass("alert-error");a=$('<a class="alert__close" data-dismiss="alert"><i class="fa fa-times"></i></a>');var e=$('<iframe class="l-ie-iframe-fix"></iframe>');d.text(b);d.append(a);d.append(e);$(".alert").remove();d.insertAfter(c)};ql.moveFlash=function(a){$(function(){return $("#flash-sibling-before").insertAfter(a)})};
$.widget("custom.userAutocomplete",$.ui.autocomplete,{_renderItem:function(a,b){return $("<li>").attr("data-value",b.value).append(ql.renderAutocompleteUser(b)).appendTo(a)}});
ql.renderAutocompleteUser=function(a){return"newUser"==a.value?'<div class="add-new-user js-add-new-user">\n      <i class="material-icons">add</i> Add New User\n    </div>':"<div class='autocomplete--user'>\n      <img src='https://secure.gravatar.com/avatar/"+a.label.gravatar_hash+".jpg?s=80&d=mm'/>\n      <div>\n        "+a.label.email+"\n        <span>"+a.label.first_name+" "+a.label.last_name+"</span>\n      </div>\n    </div>"};
ql.autocomplete=function(){function a(a,c){ql.getJson(this.element[0].dataset.autocomplete+("?q["+this.element[0].dataset.query+"]="+a.term)).then(function(a){c(a.map(function(a){return{label:a,value:a.email}}))})}return{init:function(){$(".js-user-autocomplete").userAutocomplete({source:a});$(document).on("nested:fieldAdded",function(b){b.field.find(".js-user-autocomplete").userAutocomplete({source:a})})},source:a}}();
ql.setCookie=function(a,b,c){var d=new Date;d.setTime(d.getTime()+864E5*c);c="expires="+d.toUTCString();document.cookie=a+"="+b+";"+c+";path=/"};ql.hasAnalytics=function(){return"undefined"!=typeof analytics};ql.track=function(a,b){b=void 0===b?{}:b;ql.hasAnalytics()&&analytics.track(a,b)};ql.registerExperiment=function(a){ql.gtag("event","optimize.callback",{name:a.experimentId,callback:a.callback})};ql.gtag=function(){window.dataLayer=window.dataLayer||[];dataLayer.push(arguments)};
ql.adminClassroomView=function(){function a(){ql.getJson(b).then(function(a){return c.innerHTML=a.focuses}).then(function(){return setTimeout(a,1E4)}).catch(function(a){return console.error(a.message)})}var b="",c="";return{init:function(d){b=d;c=document.querySelector(".js-classroom-focuses");a()}}}();
ql.catalogs={filter:function(){function a(a){var c=a.currentTarget.closest(".js-list-item"),e=c.querySelector('input[value="any"]');"any"===a.currentTarget.value?c.querySelectorAll('input:checked:not([value="any"])').forEach(function(a){b(a)}):e.checked&&b(e);c.querySelectorAll("input:checked").length||(e.closest(".mdl-checkbox").classList.add("is-checked"),e.checked=!0);a=(numActive=c.querySelectorAll('input:checked:not([value="any"])').length)?"("+numActive+")":"";c.querySelector(".active-filter-number").textContent=
a;ql.catalogSearchFilter()}function b(a){a.closest(".mdl-checkbox").classList.remove("is-checked");a.checked=!1}$form={};return{init:function(){if($form=document.querySelector("#catalog-filter-form"))$inputs=$form.querySelectorAll("input"),$inputs.forEach(function(b){return b.addEventListener("click",a)})}}}(),addItems:function(){function a(a){a.preventDefault();a.stopImmediatePropagation();$("#add_item_with_children").modal("hide");b(this.href)}function b(a){fetch(a,{method:"POST",credentials:"include",
headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(status).then(json).then(function(a){return ql.publish("itemAdded",a)}).catch(function(a){return console.log(a)})}function c(a){($firstCatalogItem=$catalogItems.querySelectorAll(".js-catalog-item")[0])?$firstCatalogItem.insertAdjacentHTML("beforebegin",a.html):$catalogItems.insertAdjacentHTML("beforeend",a.html);$buttons=$catalogItems.querySelectorAll(".mdl-js-button");
$buttons.forEach(function(a){a.hasAttribute("data-upgraded")||componentHandler.upgradeElement(a)});$visiblebuttons=$catalogItems.querySelectorAll(".js-item-visible");$visiblebuttons.forEach(function(a){a.hasAttribute("data-listening")||ql.catalogs.editItems.upgradeVisibleButton(a)});$priceFields=$catalogItems.querySelectorAll(".js-item-price");$priceFields.forEach(function(a){a.hasAttribute("data-listening")||ql.catalogs.editItems.upgradePriceField(a)});$oldItem=document.querySelector('.js-add-item[data-item="'+
a.catalogableType+"_"+a.catalogableId+'"]');$($oldItem).animate({height:0},200,function(){$oldItem.remove()})}$addButtons=[];$catalogItems={};return{init:function(){$catalogItems=document.querySelector(".js-catalog-items");$addButtons=document.querySelectorAll(".js-add-button");$addButtons.forEach(function(b){b.addEventListener("click",a,!1)});ql.subscribe("itemAdded",c)},addItem:b}}(),searchItems:function(){function a(a){var b=new RegExp(this.value,"gi");$items.forEach(function(a){a&&(a.dataset.query.match(b)?
a.classList.remove("is-hidden"):a.classList.add("is-hidden"))})}$searchInput={};$items={};return{init:function(){$searchInput=document.querySelector(".js-search-add-items");$searchInput.addEventListener("keyup",a);$searchInput.addEventListener("change",a);$items=document.querySelectorAll(".js-add-item")}}}(),dragAndDrop:function(){function a(a,c){var b=c.draggable[0];if(b.dataset.hasChildren){a=b.dataset.name;c=b.dataset.type;var e=b.dataset.children,f=b.querySelector(".js-add-with-children").href,
b=b.querySelector(".js-add-without-children").href;$name.innerHTML=a;$type.innerHTML=c;$count.innerHTML=e;$with_button.href=f;$without_button.href=b;$("#add_item_with_children").modal("show")}else $addButton=b.querySelector(".js-add-button"),ql.catalogs.addItems.addItem($addButton.href)}$addItems={};$modal={};$name={};$type={};$count={};$with_button={};$without_button={};return{init:function(){$modal=document.querySelector("#add_item_with_children");$name=$modal.querySelector(".js-add-item-name");
$type=$modal.querySelector(".js-add-item-type");$count=$modal.querySelector(".js-add-item-children-count");$with_button=$modal.querySelector(".js-with-children");$without_button=$modal.querySelector(".js-without-children");$(".js-add-item").draggable({helper:"clone",appendTo:"body"});$(".js-catalog-table").droppable({drop:a,activeClass:"is-droppable",hoverClass:"is-active"})}}}(),editItems:function(){function a(a){a.addEventListener("click",c,!1);a.dataset.listening="true"}function b(a){a.addEventListener("change",
d,!1);a.dataset.listening="true"}function c(a){a.preventDefault();a.stopImmediatePropagation();e(this.href)}function d(a){a=this.dataset.path.replace(/=.*/i,"="+this.value);e(a)}function e(a){fetch(a,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(status).then(json).then(function(a){return ql.publish("itemUpdated",a)}).catch(function(a){return console.log(a)})}
function f(a){$item=$catalogItems.querySelector('[data-item = "'+a.id+'"]');$visibleButton=$item.querySelector(".js-item-visible");var b=a.visible?"text--success":"text--light",c=$visibleButton.href.replace(/=\d/i,"="+(a.visible?"0":"1"));$visibleButton.href=c;$visibleButton.classList.remove("text--success");$visibleButton.classList.remove("text--light");$visibleButton.classList.add(b);a.price&&($priceField=$item.querySelector(".js-item-price"),$priceField.value=a.price)}$catalogItems={};$visibleButtons=
{};$priceFields={};return{init:function(){$catalogItems=document.querySelector(".js-catalog-items");$visibleButtons=$catalogItems.querySelectorAll(".js-item-visible");$visibleButtons.forEach(a);$priceFields=$catalogItems.querySelectorAll(".js-item-price");$priceFields.forEach(b);ql.subscribe("itemUpdated",f)},upgradeVisibleButton:a,upgradePriceField:b}}(),edit:function(){function a(a){a.preventDefault();a.stopImmediatePropagation();b(this.href)}function b(a){fetch(a,{method:"PATCH",credentials:"include",
headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(status).then(json).then(function(a){return ql.publish("catalogUpdated",a)}).catch(function(a){return console.log(a)})}function c(a){var b=a.enabled_at?"check_box":"check_box_outline_blank",c=$enableButton.href.replace(/=\d/i,"="+(a.enabled_at?"0":"1"));$enableButton.href=c;$enableIcon.innerHTML=b;b=a.fraud_protection?"check_box":"check_box_outline_blank";
a=$fraudButton.href.replace(/=\d/i,"="+(a.fraud_protection?"0":"1"));$fraudButton.href=a;$fraudIcon.innerHTML=b}$enableButton={};$enableIcon={};$fraudButton={};$fraudIcon={};return{init:function(){$enableButton=document.querySelector(".js-enable-catalog");$enableIcon=$enableButton.querySelector(".material-icons");$enableButton.addEventListener("click",a,!1);$fraudButton=document.querySelector(".js-fraud-catalog");$fraudIcon=$fraudButton.querySelector(".material-icons");$fraudButton.addEventListener("click",
a,!1);ql.subscribe("catalogUpdated",c)}}}()};initChosenListener=function(){$(".js-chosen").chosen({disable_search_threshold:20})};initChosen=function(){initChosenListener()};ql.focusDataPath="";ql.initStudentCheckBoxListeners=function(){var a=document.querySelectorAll(".js-select-student");[].concat($jscomp.arrayFromIterable(a)).map(function(a){a.addEventListener("click",ql.handleStudentCheckBox)})};
ql.handleStudentCheckBox=function(){ql.toggleStudentRow(this.closest("[data-student]"));ql.toggleStudentCheckBox(this.querySelector("i.material-icons"));ql.toggleActionButtons()};ql.toggleStudentRow=function(a){a.classList.toggle("is-selected")};ql.toggleStudentCheckBox=function(a){a.innerHTML=a.innerHTML.includes("blank")?"check_box":"check_box_outline_blank"};
ql.toggleActionButtons=function(){var a=ql.getSelectedStudentRows(),b=a.filter(function(a){return"true"==a.dataset.running}),c=document.querySelector(".js-student-table-title"),d=document.querySelector(".js-student-actions-container"),e=d.querySelectorAll(".mdl-button");a.length?(c.style.display="none",d.style.display="block",0==b.length?e.forEach(function(a){return a.classList.add("mdl-button--disabled")}):e.forEach(function(a){return a.classList.remove("mdl-button--disabled")})):(c.style.display=
"flex",d.style.display="none")};ql.getSelectedStudentRows=function(){var a=document.querySelectorAll("[data-student]");return[].concat($jscomp.arrayFromIterable(a)).filter(function(a){return a.classList.contains("is-selected")})};ql.initAddTimeListener=function(){document.querySelector(".js-add-time").addEventListener("click",ql.handleAddTime)};
ql.handleAddTime=function(){ql.getSelectedStudentRows().filter(function(a){return"true"==a.dataset.running}).map(function(a){return a.dataset.addTimePath}).map(function(a){a=new Request(a,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(a).then(status).then(json).then(function(){return ql.getJson(ql.focusDataPath).then(function(a){return ql.publish("received-focus-data",a)})}).catch(function(a){return console.log("Request failed",
a)})})};ql.initEndLabListener=function(){document.querySelector(".js-end-lab").addEventListener("click",ql.handleEndLab)};
ql.handleEndLab=function(){ql.getSelectedStudentRows().filter(function(a){return"true"==a.dataset.running}).map(function(a){return a.dataset.endLabPath}).map(function(a){fetch(a,{credentials:"include"}).then(status).then(json).then(function(){return ql.getJson(ql.focusDataPath).then(function(a){return ql.publish("received-focus-data",a)})}).catch(function(a){return console.log("Request failed",a)})})};
ql.trainerClassroomView=function(){function a(a){a.students.forEach(function(a){var b=document.querySelector('[data-student="'+a.id+'"]');b.dataset.labInstance=a.lab_instance.id;b.dataset.labState=a.lab_instance.lab_state;b.dataset.running=a.lab_instance.running;b.dataset.addTimePath=a.lab_instance.add_time_path;b.dataset.endLabPath=a.lab_instance.end_lab_path;b.querySelector(".js-status").innerHTML=a.lab_instance.status_html;a.lab_instance.score_html&&(b.querySelector(".js-score").innerHTML=a.lab_instance.score_html)})}
function b(a){a.running_hotlabs&&a.running_hotlabs.forEach(function(a){document.querySelector("#focus_"+a.id).querySelector(".js-lab-details").innerHTML=0<a.running_hotlabs_count?a.hotlabs_running_count+" labs pre-warmed.":""})}function c(a){f&&(f.innerHTML=a.hotlabs_status)}function d(a){g&&(g.innerHTML=a.hotlabs_button)}function e(){ql.getJson(ql.focusDataPath).then(function(a){return ql.publish("received-focus-data",a)}).then(function(){return setTimeout(e,5E3)}).catch(function(a){return console.log("Request failed",
a)})}var f={},g={};return{init:function(k){ql.focusDataPath=k;f=document.querySelector(".js-hotlabs");g=document.querySelector(".js-hotlabs-button");ql.subscribe("received-focus-data",c);ql.subscribe("received-focus-data",d);ql.subscribe("received-focus-data",b);ql.subscribe("received-focus-data",a);e()}}}();
ql.classroomResourceLabView=function(){function a(){console.log("Polling Resource Lab Data: "+c);ql.getJson(c).then(function(a){return ql.publish("received-resource-lab-data",a)}).then(function(){return setTimeout(a,5E3)}).catch(function(a){return console.log("Request failed",a)})}function b(a){d.innerHTML=a.html}var c="",d="";return{init:function(e){c=e;d=document.querySelector(".js-classroom-resource-lab");ql.subscribe("received-resource-lab-data",b);a()}}}();
ql.classroomStudentView=function(){function a(){ql.getJson(c).then(function(a){return ql.publish("received-student-data",a)}).then(function(){return setTimeout(a,5E3)}).catch(function(a){return console.log("Request failed",a)})}function b(a){a.focuses.forEach(function(a){[].concat($jscomp.arrayFromIterable(d)).filter(function(b){return b.dataset.focus==a.id}).shift().innerHTML=a.html})}var c="",d="";return{init:function(e){c=e;d=document.querySelectorAll(".js-focus-row");ql.subscribe("received-student-data",
b);a()}}}();var initClipboardToolTips=function(a){a.on("success",function(a){$(a.trigger).attr("title",trans.copied).tooltip("fixTitle").tooltip("show");$(a.trigger).mouseout(function(){$(this).tooltip("hide").tooltip("destroy")})});a.on("error",function(a){var b="",b=/iPhone|iPad/i.test(navigator.userAgent)?trans.no_support:/Mac/i.test(navigator.userAgent)?trans.mac_press:trans.windows_press;$(a.trigger).attr("title",b).tooltip("fixTitle").tooltip("show");$(a.trigger).mouseout(function(){$(this).tooltip("hide").tooltip("destroy")})})};
ql.collaboratorsEdit=function(){function a(){$(".js-add-collaborator-form").on("ajax:before",function(){$errorFeedback.empty()}).on("ajax:success",function(a,b,c,g){$collaboratorList.append(b.rendered);$collaboratorList.scrollTop($collaboratorList[0].scrollHeight);$collaboratorList.find(".mdl-list__item").last().addClass("is-new")}).on("ajax:error",function(a,b,f,g){c(b.responseJSON)})}function b(){$(document).on("ajax:success",".js-collaborator-item",function(a,b,c,g){a.currentTarget.remove();a.preventDefault()}).on("ajax:error",
".js-delete-permission",function(a,b,f,g){c(b.responseJSON)})}function c(a){errors=a.errors;errors.forEach(function(a){$errorFeedback.append("<p>"+a+"</p>")})}$errorFeedback=$collaboratorList="";return{init:function(){$collaboratorList=$(".js-collaborator-list");$errorFeedback=$(".js-add-collaborator-error");a();b()}}}();
ql.course={outline:function(){function a(a){this.classList.toggle("is-open");$labDescriptions.forEach(function(a){a.classList.toggle("is-open");a.classList.contains("is-open")?a.style.height=a.scrollHeight+"px":a.style.height="0px"});$courseLabs.forEach(function(a){return a.classList.toggle("is-open")})}$outlineToggle={};$labDescriptions={};$courseLabs={};return{init:function(){$outlineToggle=document.querySelector(".js-outline-toggle");$labDescriptions=document.querySelectorAll(".js-lab-description");
$courseLabs=document.querySelectorAll(".js-course-lab");$outlineToggle.addEventListener("click",a,!1)}}}()};
var initCreateAccountButtonListener=function(){$(".js-create-account-button").on("click",function(){console.log("Clicked create account button.");"undefined"!=typeof analytics&&analytics.track("create_account",{})})},initShowSectionButtonListener=function(){$(".js-show-section-button").on("click",function(){$(".section_wrapper").css("display","inline");$(".js-show-section-button").css("display","none")})};
ql.discovery=function(){function a(a,c){document.querySelectorAll(a).forEach(function(a){a.addEventListener("click",function(){var b=a.dataset;ql.track("discover_catalog_item",{id:b.id,name:b.name,type:b.type,level:b.level,path:b.path})})})}return{init:function(){a(".in-progress-cards .js-content-card","in-progress");a(".favorite-cards .js-content-card","favorite");a(".curated-cards .js-content-card","curated");a(".featured-cards .js-content-card","featured");a(".upcoming-cards .js-content-card",
"upcoming");a(".popular-cards .js-content-card","popular")}}}();function implementDisableSearchAutocomplete(a){"0"==a?window.SEARCH_AUTOCOMPLETE_DISABLED=!1:"1"==a?(window.SEARCH_AUTOCOMPLETE_DISABLED=!0,disableSearchAutocomplete()):console.error("Invalid search autocomplete variant: "+a)}function initExperiments(){ql.registerExperiment({experimentId:"lcWQaLlMQtSyN0fpKpcVbQ",callback:implementDisableSearchAutocomplete})}
ql.favoriting=function(){function a(a){a.preventDefault();a.stopImmediatePropagation();a=this.dataset.type;switch(a){case "CatalogItem":var c="Lab";break;case "LearningPath":c="Quest";break;case "ClassroomTemplate":c="Course";break;default:cateogry=a}a=this.dataset.name;this.href.includes("unfavorite")?ql.track("Clicked unfavorite button",{category:c,label:a}):ql.track("Clicked favorite button",{category:c,label:a});b.call(this)}function b(){var a=this,b=new Request(this.href,{method:"POST",credentials:"include",
headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(b).then(status).then(json).then(function(b){console.log(b);b.alert?console.error(b.alert):(a.href=b.path,a.querySelector("i").innerHTML=b.icon,a.nextElementSibling.innerHTML=b.tooltip,($card=a.closest(".js-content-card"))&&$card.classList.toggle("is-unfavorited"))})}return{init:function(){document.querySelectorAll(".js-favorite-button").forEach(function(b){b.addEventListener("click",a,!1)})}}}();
ql.initHeader=function(){$(".js-header-search-bar-button").click(function(a){$(".js-header-search-bar").addClass("is-open");$(".js-header-search-bar input").focus()});$(".js-header-search-bar .mdl-button").click(function(a){$(".js-header-search-bar").removeClass("is-open")})};
ql.catalogSearchFilter=function(){var a=document.querySelector("#catalog-filter-form"),b=document.querySelector(".js-header-search-bar.is-open")?document.querySelector("#catalog-search-mobile"):document.querySelector("#catalog-search");a?(a.querySelector("#keywords").value=b.querySelector("#keywords").value,a.submit()):b&&b.submit();return!1};
ql.header={myAccount:function(){function a(d){b.classList.toggle("is-open")?c.addEventListener("click",a,!1):c.removeEventListener("click",a,!1)}var b,c;return{init:function(){b=document.querySelector(".js-my-account-menu");c=document.querySelector(".js-main");b&&($myAccountButton=document.querySelector(".js-my-account-button"),$myAccountButton.addEventListener("click",a,!1))}}}()};
(function(a){function b(b,d){this.instructionId=b;this.refreshPage=d;this.refreshing=!1;this.refresh=function(){var a=this;this.refreshing?console.log("Already polling. Ignoring this refresh."):(this.startRefreshing(),$.post("/authoring/instructions/"+this.instructionId+"/refresh.json").done(function(){setTimeout(function(){return a.pollStatus()},2E3)}).fail(function(b){console.log(b);a.stopRefreshing()}))};this.pollStatus=function(){var b=this;a.getJson("/instructions/"+this.instructionId+"/status.json").then(function(c){"failed"==
c.state?(a.showFlash("error",c.message),b.stopRefreshing()):"completed"==c.state?(a.showFlash("notice",c.message),b.refreshPage?window.location.reload():b.stopRefreshing()):setTimeout(function(){return b.pollStatus()},5E3)}).catch(function(a){b.stopRefreshing();console.log(a)})};this.startRefreshing=function(){var a=this.instructionId;this.refreshing=!0;$(".refresh-instruction-spinner-"+a).removeClass("hidden");$(".refresh-instruction-button-"+a).addClass("hidden")};this.stopRefreshing=function(){var a=
this.instructionId;this.refreshing=!1;$(".refresh-instruction-spinner-"+a).addClass("hidden");$(".refresh-instruction-button-"+a).removeClass("hidden")}}a.refreshInstruction=function(a,d){(new b(a,d)).refresh()}})(ql);initLaunchWithSubscriptionButtonListener=function(){$(".js-launch-with-subscription-button").click(function(){$(".js-launch-with-credits-input").val(0);$(".js-launch-with-subscription-input").val(1);submitLabAccessForm()})};
initLaunchWithCreditsButtonListener=function(){$(".js-launch-with-credits-button").click(function(){$(".js-launch-with-credits-input").val(1);$(".js-launch-with-subscription-input").val(0);submitLabAccessForm()})};initLaunchWithAccessCodeButtonListener=function(){$(".js-launch-with-access-code-button").click(function(){$(".js-launch-with-credits-input").val(0);$(".js-launch-with-subscription-input").val(0);submitLabAccessForm()})};
initLabAccessFormListener=function(){$(".js-lab-access-form").on("ajax:success",function(a,b,c,d){launchLab()}).on("ajax:error",function(a,b,c,d){$(".js-access-code input").val("");alertLabAccessError(b.responseText)})};submitLabAccessForm=function(){$(".js-lab-access-form").submit()};launchLab=function(){$("#lab-access-modal").modal("hide");startLabAjax($(".js-start-lab-button").data("focus-id"),$(".js-start-lab-button").data("parent"))};
alertLabAccessError=function(a){$("#lab-access-modal").modal("hide");$(".js-alert-message").html(a);$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")};initLabAccessModal=function(){initLaunchWithSubscriptionButtonListener();initLaunchWithCreditsButtonListener();initLaunchWithAccessCodeButtonListener();initLabAccessFormListener()};
initLabAssessmentTabListener=function(){$(".js-lab-assessment-tab").click(function(){$(".js-lab-assessment-tab").toggleClass("is-open");$(".js-lab-assessment-panel").toggleClass("is-open")})};openLabAssessmentPanel=function(){$(".js-lab-assessment-tab").addClass("is-open");$(".js-lab-assessment-panel").addClass("is-open")};closeLabAssessmentPanel=function(){$(".js-lab-assessment-tab").removeClass("is-open");$(".js-lab-assessment-panel").removeClass("is-open")};initLabAssessment=function(){initLabAssessmentTabListener()};
var t="";initTopShadow=function(){$(".js-markdown-instructions").length&&new Waypoint({element:$(".js-markdown-instructions")[0],context:$(".js-lab-content")[0],handler:function(a){"up"===a?$(".js-lab-header").removeClass("has-shadow"):$(".js-lab-header").addClass("has-shadow")}})};initFakeAlertCloseListener=function(){$(".js-alert-close").click(function(){$(".js-alert").hide()})};
initCopyCode=function(){$("pre code").each(function(a,b){$(b).after('<button class="button button--copy js-copy-button-'+a+'"><i class="fa fa-clipboard"></i></button>');b=new Clipboard(".js-copy-button-"+a,{target:function(a){return a.previousElementSibling}});b.on("success",function(b){$(".js-copy-button-"+a).attr("title",trans.copied).tooltip("fixTitle").tooltip("show")});b.on("error",function(b){b=/iPhone|iPad/i.test(navigator.userAgent)?trans.no_support:/Mac/i.test(navigator.userAgent)?trans.mac_press:
trans.windows_press;$(".js-copy-button-"+a).attr("title",b).tooltip("fixTitle").tooltip("show")});$(".js-copy-button-"+a).mouseout(function(){$(this).tooltip("hide").tooltip("destroy")})})};initImageZoom=function(){$(".js-lab-content img").click(function(a){a=$(this).attr("src");$("body").append('<div class="lab-content__image-overlay js-zoomed-image"><img class="lab-content__image" src='+a+" /></div>").find(".js-zoomed-image").click(function(a){$(".js-zoomed-image").remove()})})};
initPrettyPrint=function(){$(function(){prettyPrint()})};initLabContent=function(){initTopShadow();initFakeAlertCloseListener();initCopyCode();initImageZoom();initPrettyPrint()};
ql.editRows=function(){function a(a){$editRow=this.closest(".js-edit-row");this.checkValidity()?$editRow.classList.remove("is-invalid"):$editRow.classList.add("is-invalid")}function b(a){if(!this.classList.contains("is-selected")){d();c(this);a=this.querySelectorAll("input");var b=this.querySelectorAll("select"),e=this.querySelectorAll("textarea");e[0]?e[0].focus():b[0]?b[0].focus():a[0]&&a[0].focus()}}function c(a){var b=g.indexOf(a);g[b].classList.add("is-selected");g[b].style.height=a.scrollHeight+
24+"px";g[b-1]&&g[b-1].classList.add("is-bottom");g[b+1]&&g[b+1].classList.add("is-top")}function d(){g.forEach(function(a){a.classList.remove("is-selected");a.classList.remove("is-bottom");a.classList.remove("is-top");a.style.height="64px"})}var e="",f="",g=[];return{init:function(){e=document.querySelectorAll(".js-edit-row");f=document.querySelector(".js-edit-title");g=[].concat([f],$jscomp.arrayFromIterable(e));e.forEach(function(a){return a.addEventListener("click",b)});f.addEventListener("click",
d);$errorFields=document.querySelectorAll(".has-error");$errorFields.forEach(function(a){$row=a.closest(".js-edit-row");c($row)});$inputs=document.querySelectorAll(".js-lab-details input");$inputs.forEach(function(b){b.addEventListener("keyup",a)})}}}();
ql.additionalResources=function(){function a(a){$editRow=a.target.closest(".js-edit-row");$editRow.style.height=$editRow.scrollHeight+16+"px";ql.initMaterialInputs($editRow)}function b(a){$editRow=a.target.closest(".js-edit-row");$editRow.style.height=$editRow.scrollHeight-122-16+"px"}return{init:function(){$(document).on("nested:fieldAdded",a);$(document).on("nested:fieldRemoved",b)}}}();
ql.deploymentManager=function(){function a(a){b.href="";b.style.color="red";b.style.fontWeight="400";b.style.textDecoration="line-through";d.value=1;c.remove()}var b="",c="",d="";return{init:function(){b=document.querySelector(".js-dm");c=document.querySelector(".js-remove-dm-button");d=document.querySelector(".js-remove-dm");c.addEventListener("click",a)}}}();
ql.cloudFormation=function(){function a(a){b.href="";b.style.color="red";b.style.fontWeight="400";b.style.textDecoration="line-through";d.forEach(function(a){return a.value=""});c.remove()}var b="",c="",d="";return{init:function(){b=document.querySelector(".js-cf");c=document.querySelector(".js-remove-cf-button");d=document.querySelectorAll(".js-remove-cf");c.addEventListener("click",a)}}}();
ql.studentPolicy=function(){function a(a){b.href="";b.style.color="red";b.style.fontWeight="400";b.style.textDecoration="line-through";d.forEach(function(a){return a.value=""});c.remove()}var b="",c="",d="";return{init:function(){b=document.querySelector(".js-sp");c=document.querySelector(".js-remove-sp-button");d=document.querySelectorAll(".js-remove-sp");c.addEventListener("click",a)}}}();
ql.instruction=function(){function a(a){a.stopImmediatePropagation();a.preventDefault();$instructionContent.classList.add("is-faded");$instructionLoader.classList.remove("is-hidden");a=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(a).then(status).then(json).then(function(a){return b(a.status_path)}).catch(f)}function b(a){instructionPoller=new ql.Poller(a,1E3,c,f);instructionPoller.start()}
function c(a){ql.publish("received-instruction-status",a)}function d(a){"completed"==a.state&&(instructionPoller.stop(),ql.getHtml(a.display_path).then(e).catch(f))}function e(a){$instructionContent.innerHTML=a;$instructionContent.classList.remove("is-faded");$instructionContent.classList.remove("is-hidden");$instructionHeader.classList.remove("has-error");$instructionLoader.classList.add("is-hidden")}function f(a){var b="Response not a JSON";"string"==typeof a?a.json().then(function(a){b=a.errors}):
b=a.statusText;htmlSafeMessage=$("<div>").text(b).html();$instructionContent.innerHTML="<div class='lab__instructions__error'>\n        <i class='material-icons'>error_outline</i>\n        <p>"+htmlSafeMessage+"</p>\n      </div>";$instructionContent.classList.remove("is-faded");$instructionContent.classList.remove("is-hidden");$instructionHeader.classList.add("has-error");$instructionLoader.classList.add("is-hidden")}$instructionRefresh=$instructionLoader=$instructionHeader=$instructionContent=$instructionCard=
"";instructionPoller={};return{init:function(){$instructionContent=document.querySelector(".js-instruction-content");$instructionHeader=document.querySelector(".js-instruction-header");$instructionLoader=document.querySelector(".js-instruction-loader");$instructionRefresh=document.querySelector(".js-instruction-refresh");ql.subscribe("received-instruction-status",d);$instructionRefresh&&$instructionRefresh.addEventListener("click",a,!1)},poll:b}}();
ql.downloadLab=function(){return{init:function(){var a=document.getElementById("file_download-header");null!==a&&a.addEventListener("click",function(){a.setAttribute("disabled","disabled");a.querySelector("i").innerText="checkmark"})}}}();
ql.publishLab=function(){function a(a){a.preventDefault();a=new Request(this.href,{method:"POST",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content})});fetch(a).then(status).then(json).then(function(a){return b(a.status_path)}).catch(console.error)}function b(a){publishPoller=new ql.Poller(a,500,c);publishPoller.start()}function c(a){ql.publish("received-publish-status",a)}function d(a){"done"==a.status||"error"==a.status?(publishPoller.stop(),
$toastLoader.classList.remove("is-visible"),$toastMessage.innerHTML=a.html):$toastLoader.classList.contains("is-visible")||($toastLoader.classList.add("is-visible"),$toastMessage.innerHTML=a.html);"error"===a.status?(ql.showFlash("warn",a.html),$toast.classList.remove("is-visible")):$toast.classList.add("is-visible")}$toastLoader=$toastMessage=$toast=$publishButton="";publishPoller={};return{init:function(){$publishButton=document.querySelector(".js-publish-button");$toast=document.querySelector(".js-toast");
$toastMessage=document.querySelector(".js-toast-message");$toastLoader=$toast.querySelector(".mdl-js-progress");ql.subscribe("received-publish-status",d);$publishButton.addEventListener("click",a)},poll:b}}();
ql.labLocale=function(){function a(a){a.preventDefault();ql.getHtml(this.href).then(b).then(c).catch(console.error)}function b(a){$localeDialogBody.innerHTML=a;ql.initMaterialInputs($localeDialogBody);localeDialog.open()}function c(){$(document).on("ajax:success","form",function(a,b,c,g){$(document).off("ajax:success");localeDialog.close();window.location.replace(g.responseJSON.url)}).on("ajax:error","form",function(a,b,c,g){console.error(g)})}$localeDialogBody=$newLocaleButton=$dialog="";localeDialog=
{};return{init:function(){$newLocaleButton=document.querySelector(".js-new-locale");$dialog=document.querySelector(".js-dialog");$localeDialogBody=$dialog.querySelector(".js-new-lab-locale");localeDialog=new ql.MaterialDialog($dialog);$newLocaleButton.addEventListener("click",a)}}}();
ql.tagSelect=function(){function a(a){$chosenContainers=b.querySelectorAll(".chosen-container");var c=293;$chosenContainers.forEach(function(a){c+=a.offsetHeight});b.style.height=c+"px"}var b;return{init:function(){b=document.querySelector(".js-chosen-tags").closest(".js-edit-row");$(".js-chosen-tags").chosen().change(a)}}}();
ql.permissionsSelect=function(){function a(a){a=[].concat($jscomp.arrayFromIterable(this.selectedOptions)).map(function(a){return a.value}).join("\r\n");e.value=a;d()}function b(a){this.classList.contains("is-visible")&&([].concat($jscomp.arrayFromIterable(f.querySelectorAll("option"))).forEach(function(a){return a.selected=!1}),this.value.split("\n").forEach(function(a){if(a=f.querySelector("[value='"+a+"']"))a.selected=!0}),$(".js-chosen-permissions").trigger("chosen:updated"));d()}function c(a){e.classList.toggle("is-visible");
$chosen=document.querySelector(".js-permissions .chosen-container");$chosen.classList.toggle("is-hidden");$editRow=this.closest(".js-edit-row");$editRow.classList.toggle("is-advanced");newLabel=this.dataset.label;oldLabel=this.innerText;this.setAttribute("data-label",oldLabel);this.innerText=newLabel;d()}function d(){$chosen=document.querySelector(".js-permissions .chosen-container");h=$chosen.offsetHeight;$editRow=$chosen.closest(".js-edit-row");$editRow.style.height=h+114+"px"}var e="",f="",g="";
return{init:function(){g=document.querySelector(".js-permissions-advanced-link");f=document.querySelector(".js-chosen-permissions");e=document.querySelector(".js-permissions-input");e.addEventListener("change",b);g.addEventListener("click",c);$(".js-chosen-permissions").chosen().change(a)}}}();
ql.disableLab=function(){function a(a){a.preventDefault();a.stopImmediatePropagation();b(this.href)}function b(a){fetch(a,{method:"PATCH",credentials:"include",headers:new Headers({"X-CSRF-Token":document.querySelector('meta[name="csrf-token"]').content,Accept:"application/json","Content-Type":"application/json"})}).then(status).then(json).then(function(a){return ql.publish("labUpdated",a)}).catch(function(a){return console.log(a)})}function c(a){var b=a.disabled_for_catalogs_at?"check_box":"check_box_outline_blank",
c=$disableButton.href.replace(a.disabled_for_catalogs_at?"disable":"enable",a.disabled_for_catalogs_at?"enable":"disable");$disableButton.href=c;$disableIcon.innerHTML=b;a.disabled_for_catalogs_at?$("#modal_disable").modal("show"):$disableNotice.remove()}$disableButton={};$disableIcon={};$disableNotice={};return{init:function(){$disableButton=document.querySelector(".js-disable-lab");$disableIcon=$disableButton.querySelector(".material-icons");$disableButton.addEventListener("click",a,!1);$disableNotice=
document.querySelector(".js-disable-notice");ql.subscribe("labUpdated",c)}}}();ql.labIndexView=function(){function a(a){"ArrowDown"===a.key?b[c+1]&&(c++,b[c].focus()):"ArrowUp"===a.key&&b[c-1]&&(c--,b[c].focus())}var b=[],c=0;return{init:function(){b=[].concat($jscomp.arrayFromIterable(document.querySelectorAll(".js-lab-row")));b.length&&(b[c].focus(),window.addEventListener("keyup",a))}}}();
ql.labIntroduction=function(){function a(){g.classList.remove("is-hidden");g.classList.remove("is-invisible")}function b(a){a.data===YT.PlayerState.ENDED&&d()}function c(a){d();f&&f.pauseVideo()}function d(){g.classList.add("is-invisible");localStorage.setItem("labIntroViewed",!0)}function e(a){a.target==g&&"opacity"==a.propertyName&&a.target.classList.add("is-hidden")}var f,g,k,m;return{init:function(d){g=document.querySelector(".js-lab-introduction");g.addEventListener("transitionend",e,!1);k=document.querySelector(".js-skip-button");
k.addEventListener("click",c,!1);m=document.querySelector(".js-lab-introduction-link");m.addEventListener("click",a,!1);localStorage.getItem("labIntroViewed")||d||a();YT.ready(function(){f=new YT.Player("lab-introduction",{events:{onReady:function(){},onStateChange:b}})})}}}();
ql.labOutline=function(){function a(a){a.preventDefault();a=a.target.getAttribute("href");($section=f.querySelector(a))&&$("html, body").animate({scrollTop:$section.offsetTop-200},500,function(){c()})}function b(){if(localStorage.getItem("focusSections")){var a=JSON.parse(localStorage.getItem("focusSections"));if(a.hasOwnProperty(l)){var b=location.href;location.href="#"+a[l];history.replaceState(null,null,b);window.scrollTop-=80}}}function c(a){var b=window.scrollY+280;a=[].concat($jscomp.arrayFromIterable(k)).filter(function(a){return a.offsetTop<
b});a=a.length?a.pop():k[0];d(a);e(a)}function d(a){var b={};localStorage.getItem("focusSections")&&(b=JSON.parse(localStorage.getItem("focusSections")));b[l]=a.id;localStorage.setItem("focusSections",JSON.stringify(b))}function e(a){m.forEach(function(a){return a.classList.remove("is-active")});g.querySelector('a[href="#'+a.id+'"]').classList.add("is-active")}var f="",g="",k=[],m=[],l="";return{init:function(d){f=document.querySelector(".js-lab-content");g=f.querySelector(".js-lab-content-outline");
k=f.querySelectorAll("h2");m=g.querySelectorAll("a");l=d;m.forEach(function(b){return b.addEventListener("click",a)});window.addEventListener("scroll",ql.debounce(c));b()}}}();
var initLabResourceLinkListener=function(){$(".js-lab-resource-link").click(function(){closeLabResourceArea();$.ajax("/instructions/show_spl/"+$(this).data("id")+".json").done(function(a){fillLabResource(a);openLabResourceArea()}).fail(function(a){$(".js-lab-resource").html(trans.no_resource);openLabResourceArea()})})},initLabResourceAreaCloseListener=function(){$(".js-lab-resource-area-close").click(function(){closeLabResourceArea()})},fillLabResource=function(a){var b="";null===a.document_content_type?
b="<div class='lab-resource__video-container'><div class='lab-resource__video'>"+a.description+"</div></div>":"text/plain"===a.document_content_type&&(b=a.document_file_name);$(".js-lab-resource").html(b)},openLabResourceArea=function(){$(".js-lab-resource-area").addClass("is-open");$(".js-lab-resource-background").addClass("is-visible")},closeLabResourceArea=function(){$(".js-lab-resource-area").removeClass("is-open");$(".js-lab-resource-background").removeClass("is-visible")},initLabResource=function(){initLabResourceLinkListener();
initLabResourceAreaCloseListener()},initRateItListener=function(){$(".js-rateit").bind("rated",function(a,b){setRating(b)})},initReviewSubmitListener=function(){$(".js-lab-review-form").on("ajax:success",function(a,b,c,d){alertLabReviewSuccess(d)}).on("ajax:error",function(a,b,c,d){alertLabReviewError(b.responseText)})},alertLabReviewSuccess=function(a){$("#lab-review-modal").modal("hide");$(".js-alert-message").html(trans.thanks_review);$(".js-alert").removeClass("alert-error").addClass("alert-success").css("display",
"flex")},alertLabReviewError=function(a){$("#lab-review-modal").modal("hide");$(".js-alert-message").html(a);$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")},setRating=function(a){$(".js-rating-input").val(a-3)},initLabReviewModal=function(){initRateItListener();initReviewSubmitListener()},HALL_OF_MIRRORS_COMPONENTS_SELECTOR="ql-activity-tracking, ql-multiple-choice-probe, ql-multiple-select-probe, ql-true-false-probe",pausePolling=!1,additionalConnectionInfoReceived=
!1,cloudEnvironmentResourcesReceived=!1,cfConnectionOutputReceived=!1,focusDataPoll="",consoleClipboard="",consoleWindow="",endLabButtonDisplayed=!1,consoleDetailsFilled=!1,consoleReady=!1,cloudProvisioned=!1,progressFull=!1,labAssessmentInfo=!1,hallOfMirrorsComponentsInitialized=!1,checkIfLabIsAlreadyRunning=function(){var a=$(".js-start-lab-button");""!==a.data("lab-instance-id")&&(displayWaitingLabButton(a),startLab(a.data("focus-id"),a.data("parent")))},initStartButtonListener=function(){$(".js-start-lab-button").on("click",
function(){"requires-payment"===$(this).data("lab-access")?$("#lab-access-modal").modal("show"):startLabAjax($(this).data("focus-id"),$(this).data("parent"))})},initEndButtonListener=function(){$(".js-end-lab-button").on("click",function(){var a=$(this).attr("data-lab-instance-id");pausePolling=!0;displayWaitingLabButton(this);window.confirm(trans.are_you_sure)?endLabAjax(a):returnToLab()})},initRunStepListener=function(){$(".js-show-run-step-button").on("click",function(){var a=$(this).attr("data-lab-instance-id"),
b=$(this).attr("step_no");void 0!==a&&labAssessmentInfo&&runStepAjax(a,b)})},displayWaitingLabButton=function(a){$(a).addClass("is-hidden");$(".js-waiting-lab-button").removeClass("is-hidden")},startLabAjax=function(a,b){displayWaitingLabButton($(".js-start-lab-button"));var c="/focuses/run/"+a+"?parent="+b;$(".js-start-lab-button").attr("data-qlcampaign")&&(c=c+"&qlcampaign="+$(".js-start-lab-button").data("qlcampaign"));$.ajax(c).done(function(c){startLab(a,b)}).fail(function(a){alertStartLabError(a.responseText)})},
runStepAjax=function(a,b){$.get("/assessments/run_step.json?id="+a+"&step="+b).done(function(a){updateAssessmentInfo(a);int_no=parseInt(b)-1;a.completion_only?a.step_scores[int_no]==a.step_points[int_no]?alert("Step is complete. "):alert("Step is incomplete."):alert("Check complete.\n      Points earned: "+a.step_scores[int_no]+"\n      Message: "+a.student_messages[int_no])}).fail(function(a){alert("Failed to update assessment")})},endLabAjax=function(a){$.get("/lab_instances/end/"+a+".json").done(function(a){endLab(a.runtime_error)}).fail(function(a){alertEndLabError(a.responseText)})},
alertStartLabError=function(a){showStartLabButton();$(".js-alert-message").html(a);$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")},alertEndLabError=function(a){showEndLabButton();$(".js-alert-message").html(a);$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex")},startLab=function(a,b){labAssessmentInfo=!0;labStartSegment();showProgressBar();startFocusDataPolling(a,b)},endLab=function(a){closeConsoleWindow();eraseAssessmentInfo();
endLabInstanceState();endFocusDataPolling();showStartLabButton();resetProgressBar();disableConsoleDetails();resetTimer();"undefined"===typeof a?askForReview():($(".js-alert-message").html(a),$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex"));resetVariables()},endLabInstanceState=function(){$(".js-start-lab-button").attr("data-lab-instance-id","")},returnToLab=function(){pausePolling=!1;$(".js-waiting-lab-button").addClass("is-hidden");$(".js-end-lab-button").removeClass("is-hidden")},
showEndLabButton=function(a){endLabButtonDisplayed||($(".js-end-lab-button").attr("data-lab-instance-id",a),$(".js-waiting-lab-button").addClass("is-hidden"),$(".js-end-lab-button").removeClass("is-hidden"),endLabButtonDisplayed=!0)},showRunSteps=function(a){$(".js-show-run-step-button").attr("data-lab-instance-id",a)},initHallOfMirrorsComponents=function(a){hallOfMirrorsComponentsInitialized||($(HALL_OF_MIRRORS_COMPONENTS_SELECTOR).attr("labInstanceId",a),hallOfMirrorsComponentsInitialized=!0)},
showStartLabButton=function(){$(".js-end-lab-button").attr("data-lab-instance-id","");$(".js-waiting-lab-button").addClass("is-hidden");$(".js-start-lab-button").removeClass("is-hidden")},showProgressBar=function(){$(".js-progress").removeClass("is-hidden");$(".js-progress-message").removeClass("is-hidden")},resetProgressBar=function(){$(".js-progress").addClass("is-hidden");$(".js-progress-message").addClass("is-hidden");$(".js-progress-bar").css("width","0%");$(".js-progress-message-indicator").removeClass("is-complete");
$(".js-progress-message-incomplete").removeClass("is-hidden");$(".js-progress-message-complete").addClass("is-hidden")},fillConsoleDetails=function(a){consoleDetailsFilled||($.each(a,function(a,c){a=$(".js-connection-"+c.name);a.length&&(""===c.value?a.parents(".js-form-row").fadeOut():"input"===c.type?(a.prop("disabled",!1),a.val(c.value)):"link"===c.type&&consoleReady&&(a.removeClass("is-disabled"),a.attr("href",c.value)))}),consoleClipboard=new Clipboard(".js-copy-input-button"),initClipboardToolTips(consoleClipboard))},
disableConsoleDetails=function(){$('[class*="js-connection"]').each(function(a,b){a=$(b);a.is("input")?(a.val("\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"),a.prop("disabled",!0)):(a.removeAttr("href"),a.addClass("is-disabled"))});consoleClipboard.destroy()},startFocusDataPolling=function(a,b){pausePolling=!1;requestFocusData(a,b);focusDataPoll=setInterval(function(){requestFocusData(a,b)},5E3)},endFocusDataPolling=function(){clearInterval(focusDataPoll)},askForReview=function(){$("#lab-review-modal").modal("show")},
requestFocusData=function(a,b){pausePolling||$.ajax("/focuses/show_spl/"+a+".json?parent="+b).done(function(a){pausePolling||(1>a.seconds_remaining&&0==a.billing_limit||0<a.billing_limit&&"$0.00"==a.bill_remain?noTimeRemaining():updateFocusPage(a))}).fail(function(a){alertFocusError(a.responseText)})},alertFocusError=function(a){$(".js-alert-message").html(a);$(".js-alert").removeClass("alert-success").addClass("alert-error").css("display","flex");pausePolling=!0},noTimeRemaining=function(){pausePolling=
!0;zeroTimer();var a=$(".js-end-lab-button");displayWaitingLabButton(a[0]);endLabAjax(a.data("lab-instance-id"))},updateFocusPage=function(a){consoleReady=a.console_ready;cloudProvisioned=a.cloud_provisioned;showEndLabButton(a.lab_instance_id);showRunSteps(a.lab_instance_id);initHallOfMirrorsComponents(a.lab_instance_id);fillConsoleDetails(a.connection_details);updateProgressBar(a.setup_progress);updateTimer(a.seconds_remaining,a.bill_remain);0<a.billing_limit&&updateCreditTimer(a.bill_remain);updateAssessmentInfo(a.assessment_info);
updateAdditionalConnectionInfo(a.connection_info);updateConnectionEndpointInfo(a.cf_connection_output)},updateProgressBar=function(a){progressFull||($(".js-progress-bar").css("width",a+"%"),cloudProvisioned&&($(".js-progress").addClass("is-hidden"),$(".js-progress-message-indicator").addClass("is-complete"),$(".js-progress-message-incomplete").addClass("is-hidden"),$(".js-progress-message-complete").removeClass("is-hidden")),100==a&&(progressFull=!0))},updateTimer=function(a,b){a=formatTime(a,b);
$(".js-timer").html(a)},updateCreditTimer=function(a){$(".js-credit-timer").html(a)},resetTimer=function(){0<$(".js-credit-timer").length?(updateTimer($(".js-timer").data("duration"),$(".js-credit-timer").data("creditAmount")),updateCreditTimer($(".js-credit-timer").data("creditAmount"))):updateTimer($(".js-timer").data("duration"))},zeroTimer=function(){updateTimer(0)},formatTime=function(a,b){return"undefined"!=typeof b&&86400<a?parseInt(moment.duration(a,"seconds").asDays())+" "+trans.days:moment.duration(a,
"seconds").format("HH[<span>:</span>]mm[<span>:</span>]ss",{trim:!1})},eraseAssessmentInfo=function(){var a=$(".js-lab-assessment-total-score").html();"undefined"!==typeof a&&(a=a.replace(/.*\//,"\u2014/"),$(".js-lab-assessment-total-score").html(a),$('*[class^="js-assessment-step-score"]').html("\u2014"))},updateAssessmentInfo=function(a){if("undefined"!==typeof a&&"undefined"!==typeof a.total_score&&0!==a.total_score.length){var b=a.completion_only?a.completed_steps+"/"+a.total_steps:a.total_score+
"/"+a.perfect_score;$(".js-lab-assessment-total-score").html(b);for(i=1;i<=parseInt(a.total_steps);i++)a.completion_only?a.step_complete[i-1]?($(".js-assessment-step-score-"+i+" i:first-child").addClass("fa-check"),$(".js-assessment-step-score-"+i+" i:first-child").removeClass("fa-times")):($(".js-assessment-step-score-"+i+" i:first-child").addClass("fa-times"),$(".js-assessment-step-score-"+i+" i:first-child").removeClass("fa-check")):$(".js-assessment-step-score-"+i).html(a.step_scores[i-1])}},
updateAdditionalConnectionInfo=function(a){if(!additionalConnectionInfoReceived&&0<a.length){var b="";$.each(a,function(a,d){b+="<div class='form-row'><div class='control-group'><label class='label--console'>"+d.OutputKey+"</label><input class='input--console js-connection-additional-"+d.OutputKey+"' readonly='readonly' value='"+d.OutputValue+"' /><button class='button button--copy button--copy-input js-copy-input-button' data-clipboard-target='.js-connection-additional-"+d.OutputKey+"'><i class='fa fa-clipboard'></i></button></div></div>"});
$(".js-additional-connection-info").append(b);showAdditionalConnectionInfo();additionalConnectionInfoReceived=!0}},updateConnectionEndpointInfo=function(a){if(!cfConnectionOutputReceived&&""!=a){var b="";if(-1!==a.indexOf("<html>")){var c="";-1!==a.indexOf("dashboard")&&(c=" Dashboard");-1!==a.indexOf("launch")?(a=a.match(/href="([^"]*)/)[1],b+="<div class='form-row'><div class='control-group'><a class='button button--full-width button--secondary js-connection-cfConnectionOutput' target='_blank' href='"+
a+"'>Launch Lab"+c+"</a></div></div>"):b+="<div class='form-row form-row--lab-sidebar js-connection-cfConnectionOutput'>"+a+"</div>"}else b+="<div class='form-row'><div class='control-group'><label class='label--console'>Endpoint</label><input class='input--console js-connection-cfConnectionOutput' readonly='readonly' value='"+a+"' /><button class='button button--copy button--copy-input js-copy-input-button' data-clipboard-target='.js-connection-cfConnectionOutput'><i class='fa fa-clipboard'></i></button></div></div>";
$(".js-cf-connection-output").append(b);$(".js-cf-connection-output").removeClass("is-hidden");$(".js-cf-connection-output").addClass("is-visible");cfConnectionOutputReceived=!0}},showAdditionalConnectionInfo=function(){$(".js-additional-connection-info").removeClass("is-hidden");$(".js-lab-sidebar").animate({scrollTop:$(".js-additional-connection-info").offset().top},750,function(){$(".js-additional-connection-info").addClass("is-visible")})},initExternalWindowListener=function(){$(".js-external-window").click(function(a){a.preventDefault();
if($(this)[0].hasAttribute("href"))consoleWindow=window.open($(this).attr("href"));else return!1})},closeConsoleWindow=function(){""!==consoleWindow&&consoleWindow.close()},resetVariables=function(){cfConnectionOutputReceived=additionalConnectionInfoReceived=pausePolling=!1;consoleWindow=consoleClipboard=focusDataPoll="";hallOfMirrorsComponentsInitialized=labAssessmentInfo=progressFull=cloudProvisioned=consoleReady=consoleInfoFilled=endLabButtonDisplayed=!1},labStartSegment=function(){var a=$(".js-lab_and_classroom_info").data();
"undefined"!=typeof analytics&&analytics.track("start_lab",a)};initLabRun=function(){checkIfLabIsAlreadyRunning();initStartButtonListener();initEndButtonListener();initExternalWindowListener();initRunStepListener()};
var initFakeShadow=function(){$(".js-fake-shadow-waypoint").length&&new Waypoint({element:$(".js-fake-shadow-waypoint")[0],offset:60,handler:function(){$(".js-fake-shadow").toggleClass("is-stuck")}})},initTiles=function(){$(".js-landing-tiles").addClass("is-visible")},initLanding=function(){initFakeShadow();initTiles()};
ql.list=function(){function a(a){$listItem=this.closest(".js-list-item");$listItemDetails=$listItem.querySelector(".js-list-item-details");$listItem.classList.toggle("is-expanded");$listItem.style.height=this.offsetHeight+$listItemDetails.offsetHeight+"px"}return{init:function(){document.querySelectorAll(".js-list-item").forEach(function(b){$expandToggle=b.querySelector(".js-list-item-expand");$expandToggle.addEventListener("click",a,!1)})}}}();
ql.MaterialDialog=function(a,b){this.dialog=a;this.dismissers=$(this.dialog).find("[data-dismiss]");this.isOpen=b||!1;this.listen();this.upgrade();this.render()};ql.MaterialDialog.prototype.upgrade=function(){$(this.dialog).addClass("is-upgraded")};ql.MaterialDialog.prototype.listen=function(){for(var a=0;a<this.dismissers.length;a++)this.dismissers[a].addEventListener("click",this.close.bind(this))};ql.MaterialDialog.prototype.close=function(){this.isOpen=!1;this.render()};
ql.MaterialDialog.prototype.open=function(){this.isOpen=!0;this.render()};ql.MaterialDialog.prototype.render=function(){this.isOpen?$(this.dialog).addClass("is-open"):$(this.dialog).removeClass("is-open")};ql.MaterialInput=function(a){this.input=a;this.wrapper=this.input.parentElement.parentElement;this.isFilled=this.input.value?!0:!1;this.isValid=!0;this.listen();this.upgrade()};
ql.MaterialInput.prototype.listen=function(){this.input.addEventListener("input",this.setAndRender.bind(this));this.input.addEventListener("blur",this.setAndRender.bind(this))};ql.MaterialInput.prototype.upgrade=function(){$(this.input).addClass("is-upgraded")};ql.MaterialInput.prototype.setAndRender=function(){this.setAttributes();this.isFilled?$(this.input).addClass("is-filled"):$(this.input).removeClass("is-filled");this.isValid?$(this.wrapper).removeClass("has-error"):$(this.wrapper).addClass("has-error")};
ql.MaterialInput.prototype.setAttributes=function(){this.setIsFilled();this.setIsValid()};ql.MaterialInput.prototype.setIsFilled=function(){this.isFilled=this.input.value?!0:!1};ql.MaterialInput.prototype.setIsValid=function(){this.isValid=this.input.validity.valid};ql.initMaterialInputs=function(a){a=a||[];a=a.length?a.find(".md-input__input"):document.getElementsByClassName("md-input__input");for(var b=0;b<a.length;b++)$(a[b]).hasClass("is-upgraded")||new ql.MaterialInput(a[b])};
ql.modals=function(){return{init:function(){$(".modal[data-show]").modal("show");$(".modal[data-modal-shown-path]").on("show.bs.modal",function(){$.get(this.dataset.modalShownPath)}).modal("show")}}}();ql.navigation=function(){function a(a){ql.track("Navigation link clicked",{category:"Navigation",label:this.title})}var b;return{init:function(){b=document.querySelectorAll(".js-navigation-button");b.forEach(function(b){b.addEventListener("click",a,!1)})}}}();ql.initNewLabWindowListener=function(){$(window).resize(function(){ql.setHorizontal()})};
ql.setHorizontal=function(){600>$(window).width()?($(".md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").removeClass("permissions-select__container--horizontal"),$(".js-labs-resources").removeClass("labs__resources--horizontal")):($(".md-input").addClass("md-input--horizontal"),$(".js-student-resources .md-input").removeClass("md-input--horizontal"),$(".js-permissions-select").addClass("permissions-select__container--horizontal"),$(".js-labs-resources").addClass("labs__resources--horizontal"))};
ql.initNewStudentResourceListener=function(){$(document).on("nested:fieldAdded",function(a){a=a.field.find(".md-input__input");for(var b=0;b<a.length;b++)new ql.MaterialInput(a[b])})};ql.initInstructionRemovedListener=function(){$(document).on("nested:fieldRemoved",function(a){a.field.next(".js-add-instruction").click()})};var initNewLab=function(){ql.setHorizontal();ql.initNewLabWindowListener();ql.initNewStudentResourceListener();ql.initInstructionRemovedListener()};
ql.initNewLabLocale=function(){ql.initNewLabLocaleButtonListener();ql.initNewLabLocaleSubmitListener()};ql.initNewLabLocaleButtonListener=function(){$(".js-new-lab-locale-button").on("ajax:success",function(a,b,c,d){$(".js-new-lab-locale").html(d.responseText);ql.initMaterialInputs($(".js-new-lab-locale"));ql.newLabLocaleDialog=new ql.MaterialDialog($(".js-dialog"),!0)})};
ql.initNewLabLocaleSubmitListener=function(){$(document).on("ajax:success","form",function(a,b,c,d){ql.newLabLocaleDialog.close();$(".js-lab-locales-table").find(".flex-table__row:nth-child(1)").after(d.responseText);$(".js-lab-locales-table").find(".flex-table__row:nth-child(2)").addClass("is-new")}).on("ajax:error","form",function(a,b,c,d){console.log("aww")})};
ql.pagination=function(){function a(){c.forEach(function(a){a.addEventListener("change",b)})}function b(a){a.preventDefault();this.closest("form")?this.closest("form").submit():window.location.search+="&per_page="+this.value}var c="";return{init:function(){c=document.querySelectorAll(".js-pagination select");a()}}}();
var initPaymentsPage=function(){$(".js-purchase-option").first().prop("checked",!0)},initRadioButtonListener=function(){$(".js-purchase-option").change(function(){$(".js-purchase-option").siblings(".js-purchase-option-details").removeClass("is-selected");$(this).siblings(".js-purchase-option-details").addClass("is-selected");updateTotal();$(this).hasClass("js-other-credit")||$(".js-other-credit").prop("disabled",!0)})},initOtherRadioButtonListener=function(){$(".js-other-option").change(function(){$(".js-other-credit").prop("disabled",
!1).focus()})},initOtherInputListener=function(){$(".js-other-credit").on("keyup mouseup change",function(){$(".js-other-option").val($(this).val());updateTotal()})},initAddPromoCodeButtonListener=function(){$(".js-add-promo-code-button").click(function(a){a.preventDefault();var b=$(".js-purchase-option:checked");a=b.val().trim();var b=b.data("product-code"),c=$(".js-promo-code").val().trim(),d=$(".js-payments-paths").data("validate-promo-code-path");if(null==c||") && (quantity == null || quantity == "==
c)return!1;$.get(d,{uuid:c,credits:a,product_code:b},null,"html").success(function(a){$(".js-payment-details").html(a);$("#payment_details_modal").modal("show");initRedeemPromoCodeButtonListener();updateTotal()})})},initRedeemPromoCodeButtonListener=function(){$("#redeem_now").click(function(){redeemNowUrl=$(".js-payments-paths").data("redeem-now-path");promoCode=$(".js-promo-code").val().trim();$.post(redeemNowUrl,{uuid:promoCode}).fail(function(a){alert("Redeem call failed: "+a.responseText)}).done(function(a){window.location.href=
a})})},updateTotal=function(){var a=$(".js-purchase-option:checked"),b=a.val().trim(),c=a.data("product-code"),d=$(".js-promo-code").val().trim(),a=a.data("course-id"),e=$(".js-payments-paths").data("calculate-total-path");$.get(e,{quantity:b,product_code:c,promo_code:d,course_id:a},null,"json").success(function(a){a.full_price.subtotal?($(".js-payment-sub-total").html(a.full_price.subtotal),$(".js-payment-tax").html(a.full_price.tax),$(".js-payment-total").html(a.full_price.total)):$(".js-payment-total").html(a.price);
$(".js-payment-total").data("price_in_cents",a.price_in_cents)})},initStripeButton=function(){if($(".js-stripe-button").length){var a=$(".js-stripe-button").data("currency"),b="usd"===a||"cny"===a?!0:!1,c=StripeCheckout.configure({key:$(".js-stripe-button").data("key"),currency:$(".js-stripe-button").data("currency"),alipay:b,locale:"auto",token:function(a){var b=$(".js-purchase-option:checked"),c=b.val().trim(),d=b.data("product-code"),e=$(".js-promo-code").val().trim(),f=$(".js-stripe-button").data("process-path"),
b=b.data("courseId");$.post(f,{stripeEmail:a.email,stripeToken:a.id,quantity:c,promo_code:e,product_code:d,course_id:b,referrer:$(".js-stripe-button").data("referrer").trim()}).fail(function(a){console.log("Stripe call failed: "+a)}).done(function(a){window.location.href=a})}});$(".js-stripe-button").on("click",function(b){b.preventDefault();b=$(".js-purchase-option:checked");var d=b.val().trim(),e=b.data("product-code"),f=$(".js-promo-code").val().trim(),l=b.data("course-id");b=$(".js-payments-paths").data("validate-path");
$.post(b,{quantity:d,promo_code:f,product_code:e,course_id:l}).fail(function(a){$(".js-payment-details").html(a.responseText);$("#payment_details_modal").modal("show");initRedeemPromoCodeButtonListener()}).done(function(b){b=$(".js-payments-paths").data("calculate-total-path");$.get(b,{quantity:d,promo_code:f,product_code:e,course_id:l},null,"json").success(function(b){console.log(spluralize(d,e));"undefined"!=typeof analytics&&(analytics.track("payment",{product_code:e,promo_code:f,currency:a,quantity:d,
amount:b.price_in_cents}),console.log("payment event sent"));c.open({description:b.title,amount:b.price_in_cents})})})});$(window).on("popstate",function(){c.close()})}var d=$(".js-change-credit-card");if(d.length){var e=StripeCheckout.configure({key:d.data("key"),locale:"auto",token:function(a){var b=d.data("process-path");$.post(b,{stripeToken:a.id,referrer:d.data("referrer").trim()}).fail(function(a){console.log("Stripe call failed: "+a)}).done(function(a){window.location.href=a})}});d.on("click",
function(a){a.preventDefault();e.open({description:"Update Card Details",panelLabel:"Update Card Details"});$(window).on("popstate",function(){e.close()})})}},spluralize=function(a,b){return 1==a?a+" "+b:a+" "+b+"s"},initPayments=function(){initPaymentsPage();updateTotal();initRadioButtonListener();initOtherRadioButtonListener();initOtherInputListener();initAddPromoCodeButtonListener();initStripeButton()};
ql.Permissions=function(a){var b=this;this.button=a;this.menu=new ql.PermissionsMenu($('ul[for="'+this.button.attr("id")+'"]'));this.overlay=$('aside[for="'+this.button.attr("id")+'"]');this.permissions=this.button.data("permissions");this.menu.setPermissions=function(a){b.setPermissions(a)};this.button.click(function(a){b.menu.isVisible=!0;b.render()});this.overlay.click(function(a){b.menu.isVisible=!1;b.render()});this.render()};
ql.Permissions.prototype.setPermissions=function(a){var b=this.permissions.indexOf(a);0<=b?this.permissions.splice(b,1):this.permissions.push(a);$(".js-permissions-input").val(this.permissions.join("\r\n"));this.render()};ql.Permissions.prototype.render=function(){for(var a=[],b=0;b<this.permissions.length;b++)a.push("<span>"+this.permissions[b]+"</span>");this.button.find("#permissions-display").html(a);this.menu.render()};
ql.PermissionsMenu=function(a){var b=this;this.element=a;this.isVisible=!1;this.setPermissions="";this.categories=[];a=this.element.children("li");for(var c=0;c<a.length;c++)this.categories.push(new ql.PermissionsMenuCategory($(a[c]))),this.categories[c].setPermissions=function(a){b.setPermissions(a)}};ql.PermissionsMenu.prototype.render=function(){this.isVisible?this.element.addClass("is-visible"):this.element.removeClass("is-visible");for(var a=0;a<this.categories.length;a++)this.categories[a].render()};
ql.PermissionsMenuCategory=function(a){var b=this;this.element=a;this.isSelected=!1;this.setPermissions="";this.items=[];a=this.element.find("[data-permission]");for(var c=0;c<a.length;c++)this.items.push(new ql.PermissionsMenuItem($(a[c]))),this.items[c].setPermissions=function(a){b.setPermissions(a)}};ql.PermissionsMenuCategory.prototype.setSelected=function(){this.isSelected=!1;for(var a=0;a<this.items.length;a++)this.items[a].isSelected&&(this.isSelected=!0)};
ql.PermissionsMenuCategory.prototype.render=function(){this.setSelected();this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected");for(var a=0;a<this.items.length;a++)this.items[a].render()};ql.PermissionsMenuItem=function(a){var b=this;this.element=a;this.isSelected=this.element[0].hasAttribute("data-selected");this.permission=a.data("permission");this.setPermissions="";this.element.click(function(a){b.isSelected=!b.isSelected;b.setPermissions(b.permission)})};
ql.PermissionsMenuItem.prototype.render=function(){this.isSelected?this.element.addClass("is-selected"):this.element.removeClass("is-selected")};var initPermissionsSelect=function(){ql.permissions=new ql.Permissions($(".js-permissions"))};ql.initPublishModal=function(){$("#publish_modal").on("show.bs.modal",function(){ql.updatePublishModal();setInterval(ql.updatePublishModal,5E3)}).modal()};
ql.updatePublishModal=function(){console.log("updating publish modal");var a=$(".js-status").data("lab-id"),b=$(".js-status").data("url");$.get(b).done(function(b){"done"==b.status?window.location.href="/labs/"+a+"/snapshots/new":($("#snapshotJobModal .status").html("["+b.id+"] "+b.status),null!=b.message&&$("#snapshotJobModal .message").html(b.message))})};
ql.quest={layout:function(){function a(a){requestAnimationFrame(function(){e.scrollTop>d-117?c.classList.add("is-stuck"):c.classList.remove("is-stuck")})}var b,c,d,e;return{init:function(){c=document.querySelector(".js-quest-sidebar");b=document.querySelector(".js-quest-wrapper");d=b.offsetTop;e=document.querySelector("main");e.addEventListener("scroll",a,!1)}}}(),analytics:function(){return{init:function(){var a={questName:gon.learing_path_name,label:gon.learing_path_name,category:"Quest",deployment:gon.deployment},
b=document.querySelector(".js-quest-enroll-button"),c=document.querySelector(".js-quest-unenroll-button");b&&b.addEventListener("click",function(){return ql.track("Clicked quest enroll button",a)});c&&c.addEventListener("click",function(){return ql.track("Clicked quest unenroll button",a)})}}}()};
var initSearchAutocomplete=function(){jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())};0<$(".js-autocomplete").length&&$.getJSON("/searches/autocomplete.json",function(a){window.SEARCH_AUTOCOMPLETE_DISABLED||(a=a.map($.trim).sort(function(a,c){return a.localeCompare(c)}),$(".js-autocomplete").autocomplete({source:a}))})},disableSearchAutocomplete=function(){$(".js-autocomplete").autocomplete("instance")&&$(".js-autocomplete").autocomplete("disable")},
initSearch=function(){initSearchAutocomplete()};
ql.sideMenu=function(){function a(a){1193>window.innerWidth&&b()}function b(b){b=d.classList.toggle("is-open");e.classList.toggle("is-open");ql.setCookie("sideNavOpen",b,30);ql.track("Side navigation toggled",{category:"Navigation"});b?(window.addEventListener("resize",a,!1),e.addEventListener("click",a,!1)):(window.removeEventListener("resize",a,!1),e.removeEventListener("click",a,!1))}function c(a){a.target==e&&"margin-left"==a.propertyName&&ql.publish("sideMenuToggled",null)}var d,e;return{init:function(){d=
document.querySelector(".js-side-menu");e=document.querySelector(".js-main");e.addEventListener("transitionend",c);document.querySelectorAll(".js-side-menu-button").forEach(function(a){return a.addEventListener("click",b)});d.classList.contains("is-open")&&(1193>window.innerWidth?b():(window.addEventListener("resize",a,!1),e.addEventListener("click",a,!1)))}}}();
$(function(){if(void 0!=gon.segment){!function(){var a=window.analytics=window.analytics||[];if(!a.initialize)if(a.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{a.invoked=!0;a.methods="trackSubmit trackClick trackLink trackForm pageview identify reset group track ready alias page once off on".split(" ");a.factory=function(b){return function(){var c=Array.prototype.slice.call(arguments);c.unshift(b);a.push(c);return a}};for(var b=0;b<a.methods.length;b++){var e=
a.methods[b];a[e]=a.factory(e)}a.load=function(a){var b=document.createElement("script");b.type="text/javascript";b.async=!0;b.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+a+"/analytics.min.js";a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(b,a)};a.SNIPPET_VERSION="3.1.0";a.load(gon.segment)}}();var a="none";void 0!=gon.deployment&&(a=gon.deployment);if(gon.hasOwnProperty("current_user")){var b=gon.current_user;analytics.identify(a+
"-"+b.id,{email:b.email,first_name:b.firstname,last_name:b.lastname,company:b.company,origin:b.origin,name:b.fullname,subscriptions:b.subscriptions,qlCreatedAt:b.qlCreatedAt,optIn:b.optIn,deployment:a})}analytics.ready(function(){var a=document.querySelector('meta[name="optimize-experiments"]');a&&(a=JSON.parse(a.content),ga("set","exp",a.join("!")));analytics.page()})}});initQuestCollapse=function(){$(".js-dashboard-quest").click(function(){$(this).find(".js-toggle-arrow").toggleClass("is-shown")})};
initDismissAlert=function(){$(".js-dashboard-alert-close").click(function(){$.get($(this).data("dismissed-path"))})};initStudentDashboard=function(){initQuestCollapse();initDismissAlert()};initFirstTabActive=function(){$(".js-tab").first().addClass("is-active");$(".js-tab-content").first().addClass("is-active")};
initTabListener=function(){$(".js-tab").click(function(){var a=$(this).data("tab");$(".js-tab").removeClass("is-active");$(this).addClass("is-active");$(".js-tab-content").removeClass("is-active");$(".js-tab-content[data-tab='"+a+"']").addClass("is-active")})};initTabs=function(){initTabListener()};
ql.toolbar=function(){function a(a){requestAnimationFrame(function(){var a=c.nextElementSibling;f.scrollTop>d?(c.classList.add("is-mini"),"toolbar-spacer"!=a.id&&c.insertAdjacentHTML("afterend","<div style='height: "+e+"px' id='toolbar-spacer'></div>")):(c.classList.remove("is-mini"),"toolbar-spacer"==a.id&&a.remove())})}function b(){var a=window.getComputedStyle(g,null).getPropertyValue("width");c.style.width=parseInt(a.slice(0,-2))+24+"px"}var c,d,e,f,g;return{init:function(){if(c=document.querySelector(".js-toolbar")){f=
document.querySelector("main");g=document.querySelector(".js-main");d=c.offsetTop;var k=window.getComputedStyle(c,null).getPropertyValue("margin-bottom");e=c.offsetHeight+parseInt(k.slice(0,-2));b();f.addEventListener("scroll",a,!1);window.addEventListener("resize",b,!1);ql.subscribe("sideMenuToggled",b)}}}}();initTooltips=function(){$('[data-toggle="tooltip"]').tooltip()};
var trans={},initLabTranslations=function(a){trans=a},initPaymentTranslations=function(a){trans=a},initUnblockAccountButtonListener=function(){$(".js-unblock-account-button").on("click",function(){console.log("Clicked unblock account button.");"undefined"!=typeof analytics&&analytics.track("unblock_account",{})})};
ql.affiliateAutocomplete=function(){function a(a){a=$(".js-affiliate-user-autocomplete").val();$('.js-new-user input[type="email"]').val(a);$(".js-new-user").removeClass("is-hidden");$(".js-existing-user").addClass("is-hidden")}return{init:function(){$(".js-affiliate-user-autocomplete").userAutocomplete({source:function(a,c){ql.getJson(this.element[0].dataset.autocomplete+("?q["+this.element[0].dataset.query+"]="+a.term)).then(function(a){c(a.map(function(a){return{label:a,value:a.email}}))})},open:function(b,
c){$(".js-add-new-user").click(a)}})}}}();
